(this["webpackJsonpbar-billiards-auto"]=this["webpackJsonpbar-billiards-auto"]||[]).push([[0],{124:function(e,t,a){},125:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(114),s=a.n(r),c=(a(124),a(14)),o=a(3),i=a(29),l=a(4),d=(a(125),a(0));var u=function(e){return Object(d.jsx)("header",{style:{transform:e.hidden?"translateY(-100%)":"translateY(0%)"},children:Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"91",height:"47",viewBox:"0 0 91 47",children:Object(d.jsxs)("g",{id:"Brand",transform:"translate(-20 -6)",children:[Object(d.jsx)("text",{id:"SB",transform:"translate(20 43)",fill:"#1f1f1f","font-size":"38","font-family":"Montserrat-Light, Montserrat","font-weight":"300","letter-spacing":"-0.075em",children:Object(d.jsx)("tspan",{x:"0",y:"0",children:"SB"})}),Object(d.jsx)("text",{id:"auto",transform:"translate(69 21)",fill:"#4433d4","font-size":"16","font-family":"Montserrat-Italic, Montserrat","font-style":"italic","letter-spacing":"0.075em",children:Object(d.jsx)("tspan",{x:"0",y:"0",children:"auto"})})]})})})})},j=a(2),b=a.n(j),h=a(8),p=a(9),m=a.n(p),f=a.p+"static/media/table-gradient.dba73456.svg",O="https://node-bar-billiards.herokuapp.com";var x=function(e){var t=Object(l.f)(),a=Object(n.useState)(0),r=Object(o.a)(a,2),s=r[0],c=r[1],i=Object(n.useRef)(null),u=Object(n.useState)(""),j=Object(o.a)(u,2),p=j[0],x=j[1];function g(){c(i.current.offsetWidth)}function v(){return(v=Object(h.a)(b.a.mark((function a(){var n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m()({method:"post",url:O+"/api/auth",data:{tableId:e.tableId,password:p}});case 2:n=a.sent,console.log(n),200===n.status&&n.data.jwt&&!n.data.gameId?t.push({pathname:"/setup",state:{jwt:n.data.jwt,tableName:e.name,password:p}}):200===n.status&&n.data.jwt&&n.data.gameId&&t.push({pathname:"/game",state:{jwt:n.data.jwt,gameId:n.data.gameId,password:p}});case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(n.useEffect)((function(){g()}),[]),window.addEventListener("resize",g),Object(d.jsxs)("div",{className:"Table",ref:i,style:{height:s/3},children:[Object(d.jsxs)("div",{className:"table-text",children:[Object(d.jsx)("div",{className:"table-name",children:e.name}),Object(d.jsx)("input",{type:"password",className:"password",placeholder:"Password",value:p,onChange:function(e){return x(e.target.value)}})]}),Object(d.jsx)("div",{className:"table-connect",onClick:function(){return v.apply(this,arguments)},children:"Connect >"}),Object(d.jsx)("img",{className:"menu-background",src:O+"/api/images/"+e.imgName+".jpg",alt:"Bar Billiards Table"}),Object(d.jsx)("img",{className:"gradient",src:f,alt:"gradient"})]})};var g=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){console.log("loaded."),function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()("https://node-bar-billiards.herokuapp.com/api/tables");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(d.jsx)("div",{className:"container",children:a.map((function(e){return Object(d.jsx)(x,{name:e.name,tableId:e.tableId,imgName:e.imgName},e.tableId)}))})};var v=a.p+"static/media/tick.b047f327.svg";var y=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],s=a[1],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=Object(n.useState)(!1),r=Object(o.a)(a,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){var a;return s?a=setTimeout(e,t):clearTimeout(a),function(){clearTimeout(a)}}),[e,t,s]),{onMouseDown:function(){return c(!0)},onMouseUp:function(){return c(!1)},onMouseLeave:function(){return c(!1)},onTouchStart:function(){return c(!0)},onTouchEnd:function(){return c(!1)}}}((function(){r||s(!r)}),500),l=Object(n.useState)(!1),u=Object(o.a)(l,2),j=u[0],b=u[1],h="#7262F6",p="#4433D4",m="#707070",f="#4A4A4A",O={hidden:{opacity:0,pointerEvents:"none"},visible:{opacity:1,pointerEvents:"all"}};return Object(d.jsxs)("div",Object(c.a)(Object(c.a)({className:"player-option",onClick:function(){b(!j),e.selectPlayer(e.playerId)},style:j?{borderColor:h}:{borderColor:m}},i),{},{children:[Object(d.jsx)("div",{className:"player-name",style:j?{color:p}:{color:f},children:e.name}),Object(d.jsx)("div",{className:"selected-indicator",style:j?{borderColor:h,backgroundColor:h}:{borderColor:m,backgroundColor:"#fff"},children:Object(d.jsx)("img",{className:"tick",src:v,alt:"tick icon"})}),Object(d.jsxs)("div",{className:"delete-interface",style:r?O.visible:O.hidden,children:[Object(d.jsx)("div",{className:"delete",onClick:function(){e.deletePlayer(e.playerId)},children:"Delete"}),Object(d.jsx)("div",{className:"cancel",onClick:function(e){e.stopPropagation(),s(!1)},children:"Cancel"})]})]}),e.playerId)},w="https://node-bar-billiards.herokuapp.com";var k=function(){var e=Object(l.g)().state,t=e.jwt,a=e.tableName,r=e.password,s=Object(l.f)(),c=Object(n.useState)([]),i=Object(o.a)(c,2),u=i[0],j=i[1],p=Object(n.useState)([]),f=Object(o.a)(p,2),O=f[0],x=f[1],g=Object(n.useState)(""),v=Object(o.a)(g,2),k=v[0],N=v[1];function C(e){var t=O,a=u.find((function(t){return t.playerId===e})),n=t.findIndex((function(e){return e.playerId===a.playerId}));-1===n?t.push({playerId:a.playerId}):t.splice(n,1),x(t)}function S(){return(S=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(k.length<1)){e.next=2;break}return e.abrupt("return",console.log("Name must to be at least 1 char in length"));case 2:if(!(k.length>18)){e.next=4;break}return e.abrupt("return",console.log("Name must be shorter than 18 chars"));case 4:return e.next=6,m()({method:"POST",url:w+"/api/players",data:{name:k},headers:{"x-auth-token":t}});case 6:if(200!==e.sent.status){e.next=10;break}return N(""),e.abrupt("return",P());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=Object(n.useCallback)(Object(h.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"GET",url:w+"/api/players",headers:{"x-auth-token":t}});case 2:a=e.sent,console.log(a),j(a.data);case 5:case"end":return e.stop()}}),e)}))),[t]);function I(e){return T.apply(this,arguments)}function T(){return(T=Object(h.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,m()({method:"DELETE",url:w+"/api/players",data:{playerId:a},headers:{"x-auth-token":t}});case 3:if(200!==e.sent.status){e.next=6;break}return e.abrupt("return",P());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(h.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O.length<2)){e.next=2;break}return e.abrupt("return",console.log("Need at least 2 players"));case 2:return e.prev=2,e.next=5,m()({method:"POST",url:w+"/api/games/newgame",data:O,headers:{"x-auth-token":t}});case 5:200===(a=e.sent).status&&s.push({pathname:"/game",state:{gameId:a.data,jwt:t,password:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){P()}),[P]),Object(d.jsxs)("div",{className:"Setup container",children:[Object(d.jsxs)("div",{className:"table-info",children:[Object(d.jsx)("h1",{className:"table-name",children:a}),Object(d.jsxs)("div",{className:"table-status",children:["Online",Object(d.jsx)("div",{className:"status-indicator"})]})]}),Object(d.jsxs)("div",{className:"setup-form",children:[Object(d.jsx)("h2",{children:"Select Players"}),Object(d.jsx)("div",{className:"player-list",children:u.map((function(e){return Object(d.jsx)(y,{playerId:e.playerId,name:e.name,selectPlayer:C,deletePlayer:I},e.playerId)}))}),Object(d.jsxs)("div",{className:"register-new-player",children:[Object(d.jsx)("h2",{children:"Register New Player"}),Object(d.jsxs)("div",{className:"player-form",children:[Object(d.jsx)("input",{placeholder:"Name",value:k,onChange:function(e){N(e.target.value)}}),Object(d.jsx)("div",{className:"call-to-action",onClick:function(){return S.apply(this,arguments)},children:"Submit"})]})]})]}),Object(d.jsx)("div",{className:"call-to-action start-game",style:{marginBottom:"15vh"},onClick:function(){return E.apply(this,arguments)},children:"Start Game"})]})},N=a(116),C=a.n(N),S=a(5),P=a(119);var I=function(e){var t=[],a=0;e.chartData.forEach((function(e){t.push({borderJoinStyle:"bevel",pointRadius:0,label:e.name,data:e.safePoints,borderColor:e.lineColor,borderWidth:2}),e.potentialPoints&&t.push({pointRadius:0,borderDash:[5],label:e.name+" Potential",data:e.potentialPoints,backgroundColor:"transparent",borderColor:e.lineColor,borderWidth:2}),a=e.safePoints.length+2}));var r=Object(n.useRef)(),s={labels:Object(S.a)(Array(a).keys()),datasets:t,options:{animation:{duration:0},scales:{y:{suggestedMin:0,suggestedMax:300}}}},c={opacity:e.visible?1:0,PointerEvent:e.visible?"all":"none"};return Object(d.jsx)("div",{className:"Chart",style:c,children:Object(d.jsx)(P.a,{ref:r,data:s,options:s.options,height:120})})};var T=function(e){return Object(d.jsxs)("div",{className:"toggle",onClick:e.onToggle,children:[Object(d.jsx)("div",{className:"label",children:e.label}),Object(d.jsx)("div",{className:"switch",style:{backgroundColor:e.on?"#7262F6":"#F8F6FF"},children:Object(d.jsx)("div",{className:"pip",style:{transform:e.on?"translateX(0px)":"translateX(-30px)",backgroundColor:e.on?"#fff":"#7262F6"}})})]})};var E=function(e){return Object(d.jsx)("div",{onClick:function(){return e.onPress(e.amount)},className:"point-button secondary-cta",children:e.amount})},B="https://node-bar-billiards.herokuapp.com";var W=function(e){var t=Object(l.f)(),a=Object(l.g)().state,r=a.gameId,s=a.jwt,c=a.password,i=Object(n.useState)({players:[]}),u=Object(o.a)(i,2),j=u[0],p=u[1],f=Object(n.useState)(!0),O=Object(o.a)(f,2),x=O[0],g=O[1],v=Object(n.useState)(!0),y=Object(o.a)(v,2),w=y[0],k=y[1],N=Object(n.useState)(!0),S=Object(o.a)(N,2),P=S[0],W=S[1],F=Object(n.useCallback)((function(){t.push({pathname:"/summary",state:{gameId:r,jwt:s}})}),[t,r,s]);Object(n.useEffect)((function(){C()(B+"?data="+r).on("GameData",(function(e){if(console.log(e),e.isComplete)return F();p(e)}))}),[F,p,r]);var D={current:{backgroundColor:"#7262F6",color:"#fff"},notCurrent:{}};function L(e){return A.apply(this,arguments)}function A(){return(A=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"POST",url:B+"/api/games/nextplayer",data:{gameId:r,isSafeBreak:1===t,isFoulBreak:2===t,isBlackPin:3===t},headers:{"x-auth-token":s}});case 2:if(!(a=e.sent).data.isComplete){e.next=5;break}return e.abrupt("return",F());case 5:p(a.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"POST",url:B+"/api/games/endgame",data:{gameId:r},headers:{"x-auth-token":s}});case 2:if(t=e.sent,console.log(t),200!==t.status){e.next=6;break}return e.abrupt("return",F());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"POST",url:B+"/api/games/addpoints",data:{tableId:j.table._id,password:c,points:t}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)("div",{className:"Game container",children:[Object(d.jsx)("div",{className:"scoreboard",children:Object(d.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{className:"labels",children:[Object(d.jsx)("th",{style:{paddingLeft:"12px"},children:"Name"}),Object(d.jsx)("th",{children:"Break"}),Object(d.jsx)("th",{style:{textAlign:"right",paddingRight:"12px"},children:"Score"})]}),j.players.map((function(e){return Object(d.jsxs)("tr",{className:"player",style:e.isCurrent?D.current:D.notCurrent,children:[Object(d.jsx)("th",{className:"name",children:e.name}),Object(d.jsx)("th",{className:"break",children:e.isCurrent?e.breaks[0].score:""}),Object(d.jsx)("th",{className:"score",children:e.isCurrent?Object(d.jsxs)("span",{style:{fontWeight:"700"},children:[e.score,Object(d.jsxs)("span",{style:{fontWeight:"300",opacity:.7},children:[" > ",e.score+e.breaks[0].score]})]}):e.score})]},e.name)}))]})})}),j.chartData?Object(d.jsx)(I,{visible:w,chartData:j.chartData}):Object(d.jsx)("div",{}),Object(d.jsxs)("div",{className:"points-buttons",style:{opacity:P?1:0,pointerEvents:P?"all":"none",transform:w?"translateY(0px)":"translateY(-100px)"},children:[Object(d.jsx)(E,{amount:10,onPress:R}),Object(d.jsx)(E,{amount:20,onPress:R}),Object(d.jsx)(E,{amount:30,onPress:R}),Object(d.jsx)(E,{amount:50,onPress:R}),Object(d.jsx)(E,{amount:100,onPress:R}),Object(d.jsx)(E,{amount:200,onPress:R})]}),Object(d.jsxs)("div",{className:"controls",style:{opacity:x?1:0,pointerEvents:x?"all":"none",transform:w?"translateY(0px)":"translateY(-100px)"},children:[Object(d.jsx)("div",{className:"button safe",onClick:function(){return L(1)},children:"Safe"}),Object(d.jsx)("div",{className:"button foul",onClick:function(){return L(2)},children:"Nope"}),Object(d.jsx)("div",{className:"button black",onClick:function(){return L(3)},children:"Black"})]}),Object(d.jsxs)("div",{className:"toggles-container",children:[Object(d.jsx)(T,{label:"Controls",onToggle:function(){e.showHideHeader(x),g(!x)},on:x}),Object(d.jsx)(T,{label:"Chart",onToggle:function(){return k(!w)},on:w}),Object(d.jsx)(T,{label:"Points",onToggle:function(){return W(!P)},on:P})]}),Object(d.jsx)("div",{className:"end-game secondary-cta",onClick:function(){return M.apply(this,arguments)},style:{marginBottom:"10vh"},children:"End Game"})]})},F=a.p+"static/media/crown.3eeef0a1.svg",D="https://node-bar-billiards.herokuapp.com";var L=function(){var e=Object(l.g)(),t=Object(l.f)(),a=e.state,r=a.gameId,s=a.jwt,c=Object(n.useState)({players:[]}),i=Object(o.a)(c,2),u=i[0],j=i[1],p=Object(n.useState)([]),f=Object(o.a)(p,2),O=f[0],x=f[1],g=Object(n.useCallback)(Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"POST",url:D+"/api/games",data:{gameId:r},headers:{"x-auth-token":s}});case 2:t=e.sent,console.log(t.data),j(t.data),y(t.data.players);case 6:case"end":return e.stop()}}),e)}))),[r,s]);Object(n.useEffect)((function(){g()}),[g]);var v={winner:{backgroundColor:"#7262F6",color:"#fff"},notWinner:{}};function y(e){var t=[];e.forEach((function(e){t.push({playerId:e._id})})),x(t)}function w(){return(w=Object(h.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(O),e.prev=1,e.next=4,m()({method:"POST",url:D+"/api/games/newgame",data:O,headers:{"x-auth-token":s}});case 4:200===(a=e.sent).status&&t.push({pathname:"/game",state:{gameId:a.data,jwt:s}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(d.jsxs)("div",{className:"Summary container",children:[Object(d.jsx)("h1",{children:"Summary"}),Object(d.jsx)("div",{className:"scoreboard",children:Object(d.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{className:"labels",children:[Object(d.jsx)("th",{style:{paddingLeft:"12px"},children:"Player"}),Object(d.jsx)("th",{style:{textAlign:"right",paddingRight:"12px"},children:"Score"})]}),u.players.map((function(e,t){return Object(d.jsxs)("tr",{className:"player",style:0===t?v.winner:v.notWinner,children:[Object(d.jsxs)("th",{className:"name",style:{fontWeight:0===t?"400":"300"},children:[e.name," ",0===t?Object(d.jsx)("img",{src:F,alt:"crown icon"}):""]}),Object(d.jsx)("th",{className:"score",children:e.score})]},e._id)}))]})})}),Object(d.jsx)("h2",{children:"Breakdown"}),Object(d.jsx)("div",{style:{marginBottom:50},children:u.players.map((function(e,t){return Object(d.jsxs)("div",{className:"breakdown-card",style:0===t?v.winner:v.notWinner,children:[Object(d.jsxs)("div",{className:"name",style:{fontWeight:0===t?"400":"300"},children:[e.name," ",0===t?Object(d.jsx)("img",{src:F,alt:"crown icon"}):""]}),Object(d.jsxs)("div",{className:"stat",children:["Score: ",Object(d.jsx)("span",{className:"number",children:e.score})]}),Object(d.jsxs)("div",{className:"stat",children:["Potential Score: ",Object(d.jsx)("span",{className:"number",children:e.potentialScore})]}),Object(d.jsxs)("div",{className:"stat",children:["Foul Breaks: ",Object(d.jsx)("span",{className:"number",children:e.foulBreaks})]}),Object(d.jsxs)("div",{className:"stat",children:["Points Lost: ",Object(d.jsx)("span",{className:"number",children:e.potentialScore-e.score})]})]},"breakdown-"+e._id)}))}),u.chartData?Object(d.jsx)(I,{visible:!0,chartData:u.chartData}):Object(d.jsx)("div",{}),Object(d.jsx)("div",{style:{marginBottom:20,marginTop:60},className:"call-to-action",onClick:function(){return w.apply(this,arguments)},children:"Rematch"}),Object(d.jsx)("div",{style:{marginBottom:80},className:"secondary-cta",onClick:function(){t.push("/")},children:"Finish"})]})};var A=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1];function s(e){console.log(e),r(e)}return console.log("app"),Object(d.jsx)(i.a,{basename:"/scorebilliards-auto",children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(u,{hidden:a}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/",exact:!0,component:g}),Object(d.jsx)(l.a,{path:"/setup",component:k}),Object(d.jsx)(l.a,{path:"/game",render:function(e){return Object(d.jsx)(W,Object(c.a)(Object(c.a)({},e),{},{showHideHeader:s}))}}),Object(d.jsx)(l.a,{path:"/summary",component:L})]})]})})},M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,284)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};s.a.render(Object(d.jsx)(A,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");M?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):R(t,e)}))}}(),Y()}},[[283,1,2]]]);
//# sourceMappingURL=main.33d94601.chunk.js.map